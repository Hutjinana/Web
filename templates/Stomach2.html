<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Physiotherapy AI for Herniated Disc Patient</title>
    <script>
        function startCamera() {
            fetch('/Stomach/start_video')
                .then(response => response.text())
                .then(data => {
                    console.log(data);
                    document.getElementById("video-frame").src = "/Stomach/video_feed";
                })
                .catch(error => {
                    console.error("Error starting camera:", error);
                    alert("Failed to start camera. Please try again.");
                });
        }

        function stopCamera() {
            fetch('/Stomach/stop_video')
                .then(response => response.text())
                .then(data => {
                    console.log(data);
                    document.getElementById("video-frame").src = "";
                })
                .catch(error => {
                    console.error("Error stopping camera:", error);
                    alert("Failed to stop camera. Please try again.");
                });
        }
    </script>
    
    <link rel="stylesheet" href="{{ url_for('static', filename='css/Stomach.css') }}">
</head>
<body>
    <div class="top-bar">
        <a href="{{ url_for('home') }}">
            <button class="back">
                <img src="{{ url_for('static', filename='image/ลูกศร.png') }}" alt="ย้อนกลับ" class="button-back">
            </button>
        </a>    
    </div>
    <header>
        <h1>Lying on your stomach</h1>
    </header>
    <div class="body">
        <div class="data">
            <div class="lorem">
                <div class="word">
                    <div class="How">
                        <h1>How to do</h1>
                    </div>
                    <ul>
                        <li>Lie down on your stomach. Place your arms at your sides.</li>
                        <li>Turn your head to the side or face down.</li>
                        <li>Hold for 2 to 3 minutes. Repeat up to eight times a day.</li>
                    </ul>
                </div>
            </div>
            <div class="explain">
                <div class="Qualifications">
                    <ul>
                        <li>PROB = correctness (if this value is close to 1, you are doing it correctly)</li>
                        <li>CLASS = name of physical therapy</li>
                        <li>TIME = timer</li>
                        <li>FPS = Frames per second</li>
                    </ul>
                    <div class="careful">
                        *Be careful: If you feel pain, stop immediately.
                    </div>   
                </div>
            </div>
        </div>
        <div class="data">
            <img src="{{ url_for('static', filename='image/Lying-on-your-stomach.webp') }}" alt="หมอนรองกระดูกทับเส้น" class="img">
        </div>
    </div>
    <button class="start" onclick="startCamera()">
        Start posing
    </button>
    <button onclick="stopCamera()" class="Stop">Stop posing</button>
    <div>
        <img id="video-frame" src="" width="50%" alt="Live feed will appear here"/>
    </div>
</body>
</html>
